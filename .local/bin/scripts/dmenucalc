#!/bin/sh

# Alternate
# Equation=$(echo "" | dmenu -n -p "Enter equation" | xargs -I % calc %)
# notify-send "Result" "$Equation"

result=$(printf "%s\n" "$@" \
    | bc -l \
    | sed '/\./ s/\.\{0,1\}0\{1,\}$//' \
)
select=$(printf "%s\n" \
            "clear" \
            "copy to clipboard" \
    | dmenu -b -l 3 -p "= $result" \
)
case $select in
    "")
        ;;
    clear)
        "$0"
        ;;
    "copy to clipboard")
        printf "%s\n" "$result" \
            | xsel -i -b \
            && notify-send \
                "Clipboard" \
                "Result copied: $result"
        ;;
    *)
        "$0" "$result $select"
        ;;
esac
