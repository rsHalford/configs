#!/bin/sh

unknownIcon="Ôñê"
errorIcon="ÔñÇ"
fullIcon="üîã"
chargingIcon="ÔñÉ"
icon00="Ôñç"
icon10="Ôïπ"
icon20="Ôï∫"
icon30="Ôïª"
icon40="Ôïº"
icon50="ÔïΩ"
icon60="Ôïæ"
icon70="Ôïø"
icon80="ÔñÄ"
icon90="ÔñÅ"
icon100="üîã"

capacity=$(cat /sys/class/power_supply/BAT0/capacity)
status=$(cat /sys/class/power_supply/BAT0/status)

if [ "$status" = "Full" ]; then
    icon="$fullIcon"
elif [ "$status" = "Charging" ]; then
    icon="$chargingIcon"
elif [ "$status" = "Discharging" ]; then
    if [ "$capacity" -le 10 ]; then
        icon="$icon00"
    elif [ "$capacity" -le 20 ]; then
        icon="$icon10"
    elif [ "$capacity" -le 30 ]; then
        icon="$icon20"
    elif [ "$capacity" -le 40 ]; then
        icon="$icon30"
    elif [ "$capacity" -le 50 ]; then
        icon="$icon40"
    elif [ "$capacity" -le 60 ]; then
        icon="$icon50"
    elif [ "$capacity" -le 70 ]; then
        icon="$icon60"
    elif [ "$capacity" -le 80 ]; then
        icon="$icon70"
    elif [ "$capacity" -le 90 ]; then
        icon="$icon80"
    elif [ "$capacity" -le 99 ]; then
        icon="$icon90"
    elif [ "$capacity" -eq 100 ]; then
        icon="$icon100"
    fi
elif [ "$status" = "Unknown" ]; then
    icon="$unknownIcon"
else
    icon="$errorIcon"
fi

timeRemaining=$(acpi | cut -d " " -f5- | sed -e 's/\(:[0-9]\+ \)/ /g')

echo "$icon $capacity% $timeRemaining"
